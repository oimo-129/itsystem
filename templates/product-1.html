<!-- è¿™ä¸ªå½’æˆç ”ç©¶æŠ¥å‘Šç•Œé¢æ¯”è¾ƒå¥½ -->
{% load static %}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¸‚åœºæŠ¥å‘Š</title>
    <script src="{% static 'it/js/jquery-1.11.3.min.js' %}"></script>
    <script src="{% static 'it/js/common.js' %}"></script>
   
    <link rel="stylesheet" href="{% static 'it/css/product/main.css' %}">
    <link rel="stylesheet" href="{% static 'it/css/product/basic.css' %}">
    <link rel="stylesheet" href="{% static 'it/css/product/flexslider.css' %}">
    <link rel="stylesheet" href="{% static 'it/css/product/footer.css' %}">
    <script src="{% static 'it/js/product/slide_palace_treasury.js' %}"></script>
    <link rel="icon" href="{% static 'it/img/gree.ico' %}" type="image/">

    <link rel="stylesheet" href="{% static 'it/css/product/special_vertical.css' %}">
    <link rel="stylesheet" href="{% static 'it/css/product/chanye.css' %}">
    <script src="{% static 'it/js/product/special_vertical.js' %}"></script>

    <!--å¢åŠ éé˜»å¡æ¶ˆæ¯å¼¹çª—-->
    <link rel="stylesheet" href="{% static 'plugin/toastr/toastr.min.css' %}">
   

     <!--æ–°å»ºå¼¹çª—éœ€è¦çš„æ–‡ä»¶-->
     <link rel="stylesheet" href="{% static 'plugin/sweetalert2.min.css' %}">
     <script src="{% static 'plugin/sweetalert2.min.js' %}"></script>
 

<style>



    
.header1{ width: 100%; height: 32px; background-color:hsl(221, 89%,41%); margin:0 auto;}
.header-top {  height:32px; margin:0 auto;}
.header-top-left { height:32px;}
.header-top-left a { float:left; font-size:15px; width:90px; line-height:32px; color:#eee; display:block;margin-right: 10px;}
.header-top-left a span { float: left;padding-left:5px; padding-top: 0px; }
 .header-top-left a:hover {background:#d85500;}
 .header-top-right a { font-size:15px;color: #fff; display:block; float:left; line-height:32px; text-align:center; }
 .header-top-right a { font-size:15px;color: #fff; display:block; float:left; line-height:32px; text-align:center;padding:0px 10px;padding-right:30px;}

.header-top-right a span { color: #FFFFFF;float: right;}
.header-top-right a img { float:left; margin:2px 0 0 0;margin-right: 2px;margin-top: 5px;}
.header-top-right a:hover { color:#c92424;}
.nav2{background-color: hsl(221, 89%,41%);}

.user-info {
    display: flex;
    align-items: center;
    gap: 8px; /* è®¾ç½®å›¾ç‰‡å’Œæ–‡å­—ä¹‹é—´çš„é—´è· */
}

.user-info img {
    display: block; /* æ¶ˆé™¤å›¾ç‰‡åº•éƒ¨å¯èƒ½çš„ç©ºéš™ */
}

.user-info span {
    color: white;
}


.dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #0d09eb;
            min-width: 80px;
            {#min-width: 160px;#}
            box-shadow: 0px 8px 16px 0px rgba(220, 25, 25, 0.2);
            z-index: 1;
        }

        .dropdown:hover .dropdown-content {
            display: block;
            background-color: #1d3dbb;
        }



        .dropdown-content a {
            color: #ffffff;
            padding: 12px 10px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #5395ec;
            /* æ‚¬åœæ—¶æ›´æ”¹é“¾æ¥èƒŒæ™¯è‰² */
        }

        .dropdown  {
            padding-top:0px;
            padding-right: 20px;
            cursor: pointer;
        }



        .content_list_title_231 a::before {  
    content: "ğŸ“„";  
    {#margin-right: 1px;  #}

    }  



    .toast-info {  
        background-color: #105CB3 !important; /* è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºè“è‰² */  
        color: white; /* è®¾ç½®æ–‡æœ¬é¢œè‰²ä¸ºç™½è‰²ï¼Œä»¥ä¾¿åœ¨è“è‰²èƒŒæ™¯ä¸Šå¯è¯» */  
    }


    

    .search_title_23 a.btn {  
        background-color: #248dfb;;  
        color: white;  







        .search-form {  
            display: flex;  
            align-items: center;  
        }  
        
        .search-result-info {  
            margin: 10px 0;  
            padding: 10px;  
            background-color: #f5f5f5;  
            border-radius: 4px;  
        }  
        
        /* å¦‚æœæ²¡æœ‰æœç´¢ç»“æœ */  
        .no-results {  
            text-align: center;  
            padding: 20px;  
            background-color: #f5f5f5;  
            margin: 20px 0;  
            border-radius: 4px;  
        }  
    }  





/* åœ¨ä½ çš„ CSS æ–‡ä»¶ä¸­æ·»åŠ  */  
.date-form input[type="date"] {  
    padding: 5px;  
    border: 1px solid #ccc;  
    border-radius: 4px;  
    cursor: pointer;  
}  

.date-filter-info {  
    margin: 10px 0;  
    padding: 5px 10px;  
    background-color: #f5f5f5;  
    border-radius: 4px;  
    font-size: 14px;  
}  




#contact:hover
{
    color:blue;
}




.my-swal {  
    font-family: 'Arial', sans-serif;  
}  

.my-swal-popup {  
    background-color: #f8f8f8;  
    border-radius: 10px;  
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);  
}  

.my-swal-header {  
    background-color: #007bff;  
    color: #fff;  
    padding: 20px;  
    border-top-left-radius: 10px;  
    border-top-right-radius: 10px;  
}  

.my-swal-title {  
    font-size: 24px;  
    font-weight: bold;  
}  

.my-swal-content {  
    padding: 20px;  
    font-size: 16px;  
}  

.my-swal-confirm-button {  
    background-color: #007bff;  
    color: #fff;  
    border: none;  
    padding: 10px 20px;  
    border-radius: 5px;  
    font-size: 16px;  
    cursor: pointer;  
}



.highlight {
    animation: highlightAnimation 3s ease-in-out;
}

@keyframes highlightAnimation {
    0% {
        background-color: transparent;
    }
    20% {
        background-color: rgba(255, 255, 0, 0.3);
    }
    80% {
        background-color: rgba(255, 255, 0, 0.3);
    }
    100% {
        background-color: transparent;
    }
}
</style>


</head>


<body>

 <div class="header1">
        <div class="header-top">
            <div class="header-top-left fl">
                <a href="{% url 'home' %}" target="_blank">

                    <img class="flb" src="{% static 'it/img/gree.ico' %}">
                    <span>é¦–é¡µ</span>
                </a>

            </div>


            <div class="header-top-right fr ">
{% if request.user.is_authenticated %}
    <div class="dropdown">

        <div class="user-info">
            {% if request.user.avatar %}
            <img src="{{ MEDIA_URL }}{{ request.user.avatar }}" width="30" height="30" >
           {% else %}
           <img src="{{ MEDIA_URL }}avatars/default/default.png" width="30" height="30" >
           {% endif %}
             <span style="color: white; ">{{ user.username }}</span>
        </div>

        <div class="dropdown-content">
                     <a href="{% url 'user:userinfo' %}">ä¸ªäººä¸­å¿ƒ</a>
                     <a href="{% url 'logout' %}">é€€å‡ºç™»å½•</a>
        </div>

    </div>
{% else %}
        <a href="{% url 'login' %}" target="_blank">
            <img src="{% static 'it/img/person-fill-check.svg' %}" width="20" height="20">
            ç”¨æˆ·ç™»å½•
        </a>
{% endif %}
            </div>

        </div>
    </div>






<!--æœç´¢æ¨¡å—å¼•å…¥-->

    <div class="nav">
        <div class="nav_inbox">
            <a href="{% url 'home' %}">
                <img class="logo" src="{% static 'it/img/logo_jd.png' %}" alt="">
            </a>
            <div class="search">
                <!--æ·»åŠ GETè¡¨å•-->
                <form id="searchForm" method="get" action="{% url 'info:infolist' %}" class="search-form">
                    <!--å¦‚ä½•æœ‰ categoryå‚æ•°ï¼Œä¿ç•™å®ƒ-->
                    {% if current_category != 'all' %}
                    <input type="hidden" name="category" value="{{ current_category }}">  
                    {% endif %}
                
                    <input type="text" name="keyword" placeholder="è¯·è¾“å…¥æ–‡ä»¶å…³é”®è¯" value="{{ keyword|default:'' }}" style="color: #333;">
                    <button type="submit" class="search_btn">ç«‹å³æœç´¢</button>  
                </form>
            </div>
        </div>
    </div>


<!-- æ·»åŠ æœç´¢ç»“æœæç¤ºï¼ˆå¯é€‰ï¼‰ -->  
<!--{% if keyword %}  
<div class="search-result-info">  
    æœç´¢å…³é”®è¯: "{{ keyword }}" - æ‰¾åˆ° {{ total_files }} ä¸ªç»“æœ  
</div>  
{% endif %}  
-->



    <div class="nav2">
        <ul>
            <li><a  href="{% url 'home' %}">æƒ…æŠ¥é¦–é¡µ</a></li>
            <li><a class="act2" href="#" target="_blank">ç ”ç©¶æŠ¥å‘Š</a></li>
            
        </ul>
    </div>





<!-- content start -->
<div class="bg_color7">
    <div class="content3">
        <!-- title start -->
        <div class="search_title_23">
            <a href="{% url 'info:infolist' %}" class="{% if not current_category or current_category == 'all' %}btn{% endif %}" >
                å…¨éƒ¨èµ„æ–™</a>
            <a href="{% url 'info:infolist' %}?category=äº§ä¸šæ´å¯Ÿ" class="{% if current_category == 'äº§ä¸šæ´å¯Ÿ' %}btn{% endif %}">
                äº§ä¸šæ´å¯Ÿ</a>
            <a href="{% url 'info:infolist' %}?category=è¡Œä¸šç ”ç©¶" class="{% if current_category == 'è¡Œä¸šç ”ç©¶' %}btn{% endif %}">
                è¡Œä¸šç ”ç©¶</a>
            <a href="{% url 'info:infolist' %}?category=ç”¨æˆ·è°ƒç ”" class="{% if current_category == 'ç”¨æˆ·è°ƒç ”' %}btn{% endif %}">
                ç”¨æˆ·è°ƒç ”</a>
            <a href="{% url 'info:infolist' %}?category=é™¢å†…æŠ¥å‘Š" class="{% if current_category == 'é™¢å†…æŠ¥å‘Š' %}btn{% endif %}">
                é™¢å†…æŠ¥å‘Š</a>                     
        </div>
    
        <div class="chart-vd f-cb">
    <ul>  
        <li>  
            <div id="divItem">  
                <form id="dateForm" method="get" action="{% url 'info:infolist' %}" class="date-form name">  
                    æŠ¥å‘Šæ—¶é—´ï¼š
                    <!-- ä¿ç•™ç°æœ‰çš„æœç´¢å‚æ•° -->  
                    {% if keyword %}  
                    <input type="hidden" name="keyword" value="{{ keyword }}">  
                    {% endif %}  
                    {% if current_category != 'all' %}  
                    <input type="hidden" name="category" value="{{ current_category }}">  
                    {% endif %}  
                    
                    <input type="date" name="selected_date" value="{{ selected_date|default:'' }}"   
                        onchange="this.form.submit()">  
                </form>  
            </div>  
        </li>  
    </ul>  
        <div class="search-head">
            <form id="searchForm" method="get" action="{% url 'info:infolist' %}" class="search-form">
                {% if current_category != 'all' %}
                <input type="hidden" name="category" value="{{ current_category }}">  
                {% endif %}              
                <input type="text" id="queryKey"  name="keyword" class="keys" value="{{ keyword|default:'' }}" placeholder="è¯·è¾“å…¥å…³é”®è¯" style="color: #333;">
                <button type="submit" class="search_btn" style="display: none;">æœç´¢</button> <!-- éšè—æŒ‰é’®ï¼Œä½¿ç”¨å›¾ç‰‡ä»£æ›¿ --> 
                <p class="sub_23" style="cursor: pointer;" onclick="this.parentElement.submit();" >
                    <img src="{% static 'it/images/chanye_search_23.png' %}" alt="">æœç´¢
                </p>
            </form>
        </div>      
    </div>
        <!-- search end -->
        <!-- content list start -->







        <div class="content_list_23">


            <!--æ–‡ä»¶æ”¾çš„åˆ—è¡¨åœ°æ–¹-->




            <ul>

                {% for file in files %}

                 <li>
                                    <div class="content_list_img_23">
                                        <a href="{% url 'info:file_download' file.id %}" title="#" target="_blank">
                                            <img src="{{ file.cover.url }}" alt="#">
                                        </a>
                                    </div>
                                    <div class="content_list_font_232">
                                        <a href="{% url 'info:file_download' file.id %}" target='_blank' title='#'>{{ file.file_dist }}</a>

                                        <b>ä¸Šä¼ æ—¶é—´ï¼š{{ file.add_time|date:"Y-m-d" }}</b>
                                    </div>



                                    <div class="content_list_title_231">
                                        <a href="{% url 'info:file_download' file.id %}" title="{{ file.name }}" target="_blank" class="wes2" >
                                            {{ file.name }}
                                        </a>
                                    </div>




                  </li>

                {% endfor %}

            </ul>



        </div>







    <!--åˆ†é¡µæ¨¡å—-->

        <!-- content list end -->
        <!-- padding start -->
        <div class="Pagination margin_top26" id="kkpager">

        </div>
        <!-- padding end -->
    </div>
</div>
<!-- content start -->

    <!-- é¡µè„š -->
   <!-- ç§»é™¤å¤šä½™çš„é—­åˆæ ‡ç­¾å’Œæ³¨é‡Š -->  
<div id="footer">  
    <div class="footer_end">  
        <div class="footer_end_box">  
            <div class="footer_end_box_left">  
                <p>  
                    <a href="#" target="_blank" title="å®¶ç”µä¸€é™¢">æ ¼åŠ›ç”µå™¨å®¶ç”µæŠ€æœ¯ç ”ç©¶ä¸€é™¢</a>  
                    <i>|</i>  
                    <a href="#"  title="è”ç³»æˆ‘ä»¬" onclick="contact() " id="contact">è”ç³»ç®¡ç†å‘˜</a> 
                </p>  
            </div>  
           
        </div>  
    </div>  
</div>  
    <!--header-top end-->
    <!--header-top end-->




    <script src="{% static 'it/js/product/up_silde.js' %}"></script>

 <!--ç¬¬ä¸‰æ–¹åˆ†é¡µæ’ä»¶ -->

    <script type="text/javascript" src="{% static 'it/js/product/kkpager.min.js' %}"></script>

    <script type="text/javascript">
    $(function () {
        //è®¡ç®—æ€»é¡µç 
        var pageSize = {{ page_size }}; //æ¯ä¸€é¡µæ˜¾ç¤ºæ•°é‡
        var totalRecord = {{ total_files }};//æ€»è®°å½•æ•°
        var totalPage = Math.ceil(totalRecord / pageSize);//æ€»é¡µæ•°
        var currentPage = {{ request.GET.page|default:1 }};//å½“å‰é¡µç ï¼Œé»˜è®¤æ˜¯1

        //ç”Ÿæˆåˆ†é¡µæ’ä»¶
        kkpager.generPageHtml({
            pagerid: 'kkpager',
            pno: currentPage,
            total: totalPage,
            totalRecords: totalRecord,
            mode: 'link', //è®¾ç½®ä¸ºlinkæ¨¡å¼

            isShowTotalPage: true,
            isShowTotalRecords: true,
            isShowFirstPageBtn: true,
            isShowLastPageBtn: true,
            isGoPage: false,

            //æˆ‘æ·»åŠ çš„ï¼šé“¾æ¥å‡½æ•°å¤„ç†
            //getLinkä»…é€‚ç”¨äºmodeä¸ºlink
            getLink: function (n) {
                //æ„å»ºåˆ†é¡µURL,ä¿ç•™å…¶ä»–æŸ¥è¯¢æ•°æ®ï¼Ÿ
                var baseUrl = window.location.pathname;
                var params = new URLSearchParams(window.location.search);
                params.set('page',n);
                //åˆ†ç±»å‚æ•°
                var category = params.get('category')
                if(category)
                {
                    params.set('category',category);
                }
                return baseUrl+'?'+params.toString();

            },
     
            lang:{
                firstPageText: 'é¦–é¡µ',
            firstPageTipText: 'é¦–é¡µ',
            lastPageText: 'å°¾é¡µ',
            lastPageTipText: 'å°¾é¡µ',
            prePageText: 'ä¸Šä¸€é¡µ',
            prePageTipText: 'ä¸Šä¸€é¡µ',
            nextPageText: 'ä¸‹ä¸€é¡µ',
            nextPageTipText: 'ä¸‹ä¸€é¡µ',
            totalPageBeforeText: 'å…±',
            totalPageAfterText: 'é¡µ',
            totalRecordsAfterText: 'æ¡æ•°æ®',
            gopageBeforeText: 'è½¬åˆ°',
            gopageButtonOkText: 'ç¡®å®š',
            gopageAfterText: 'é¡µ',
            buttonTipBeforeText: 'ç¬¬',
            buttonTipAfterText: 'é¡µ'

            },

             // æ ·å¼
        themeCss: 'pagination',
        noPageText: '...',
        isShowPrePageBtn: true,
        isShowNextPageBtn: true,
        isShowTotalPage: true,
        isShowTotalRecords: true,
        isGoPage: false,
        isWrapedPageBtns: true,
        isWrapedInfoTextAndGoPageBtn: true

        });
    });

    </script>


    <script>  
        $(document).ready(function(){  
            // ä¸‹è½½æŒ‰é’®ç‚¹å‡»äº‹ä»¶  
            $('.download-btn').click(function(e){  
                toastr.info('æ–‡ä»¶æ­£åœ¨å¤„ç†ï¼Œè¯·ç¨å...', '', {  
                    "timeOut": "1000",  
                    "positionClass": "toast-top-center"  
                });  
            });  
        
            // ä¿æŒåˆ†é¡µæ—¶çš„åˆ†ç±»å‚æ•°  
            function updatePaginationLinks() {  
                var category = new URLSearchParams(window.location.search).get('category');  
                if (category) {  
                    $('#kkpager a').each(function() {  
                        var href = $(this).attr('href');  
                        if (href) {  
                            var url = new URL(href, window.location.origin);  
                            url.searchParams.set('category', category);  
                            $(this).attr('href', url.search);  
                        }  
                    });  
                }  
            }  
        
            // åœ¨åˆ†é¡µç”Ÿæˆåæ›´æ–°é“¾æ¥  
            if (typeof kkpager !== 'undefined') {  
                var oldGenerPageHtml = kkpager.generPageHtml;  
                kkpager.generPageHtml = function(args) {  
                    oldGenerPageHtml.call(this, args);  
                    updatePaginationLinks();  
                };  
            }  
        });  
        </script>


        <!-- æ·»åŠ å¿…è¦çš„ JavaScript -->  
<script>  
    document.addEventListener('DOMContentLoaded', function() {  
        // è·å–è¡¨å•å…ƒç´   
        const searchForm = document.getElementById('searchForm');  
        const searchInput = searchForm.querySelector('input[name="keyword"]');  
    
        // æ·»åŠ è¡¨å•æäº¤äº‹ä»¶å¤„ç†  
        searchForm.addEventListener('submit', function(e) {  
            // å¦‚æœæœç´¢æ¡†ä¸ºç©ºï¼Œé˜»æ­¢æäº¤  
            if (!searchInput.value.trim()) {  
                e.preventDefault();  
                alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');  
                return false;  
            }  
        });  
    
        // æ·»åŠ è¾“å…¥æ¡†å›è½¦é”®å¤„ç†  
        searchInput.addEventListener('keypress', function(e) {  
            if (e.key === 'Enter') {  
                searchForm.submit();  
            }  
        });  
    });  
    </script>  




    <!-- æ·»åŠ  JavaScript ä»¥ç¡®ä¿ç‚¹å‡»æ ‡ç­¾æ—¶è§¦å‘æ—¥æœŸé€‰æ‹©å™¨ -->  
    <script>  
        document.addEventListener('DOMContentLoaded', function() {  
            const dateLabel = document.querySelector('.date-label');  
            const datePicker = document.getElementById('datePicker');  
            
            if (dateLabel && datePicker) {  
                dateLabel.addEventListener('click', function(e) {  
                    e.preventDefault();  
                    // ä½¿ç”¨showPicker()æ–¹æ³•ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰  
                    if (datePicker.showPicker) {  
                        datePicker.showPicker();  
                    } else {  
                        // é™çº§æ–¹æ¡ˆï¼šç›´æ¥è§¦å‘ç‚¹å‡»  
                        datePicker.click();  
                    }  
                });  
        
                // ç›‘å¬æ—¥æœŸå˜åŒ–  
                datePicker.addEventListener('change', function() {  
                    this.form.submit();  
                });  
            }  
        });
    </script> 
   
   

    <script>
        function contact() {  
            var currentScrollPosition = window.pageYOffset || document.documentElement.scrollTop;  
            Swal.fire({  
                title: 'ç®¡ç†å‘˜',  
                html: '<div style="text-align: center;">å®¶ç”µæŠ€æœ¯ç ”ç©¶ä¸€é™¢:èƒ¡èŠ³<br><br>è”ç³»åº§æœºï¼š29844</div>',  
                icon: 'question',  
                confirmButtonText: 'ç¡®å®š',  
                customClass: {  
                    container: 'my-swal',  
                    popup: 'my-swal-popup',  
                    header: 'my-swal-header',  
                    title: 'my-swal-title',  
                    closeButton: 'my-swal-close-button',  
                    image: 'my-swal-image',  
                    content: 'my-swal-content',  
                    input: 'my-swal-input',  
                    actions: 'my-swal-actions',  
                    confirmButton: 'my-swal-confirm-button',  
                    cancelButton: 'my-swal-cancel-button',  
                    footer: 'my-swal-footer'  
                },
                width: '400px'   
            }).then(function() {  
                window.scrollTo(0, currentScrollPosition);  
            });  
        }
    </script>




{% if file_id %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // æŸ¥æ‰¾ç›®æ ‡æ–‡ä»¶å…ƒç´ 
    const targetElement = document.querySelector(`[data-file-id="{{ file_id }}"]`);
    if (targetElement) {
        // æ»šåŠ¨åˆ°ç›®æ ‡å…ƒç´ 
        targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // æ·»åŠ é«˜äº®æ•ˆæœ
        targetElement.classList.add('highlight');
        
        // å¯é€‰ï¼š3ç§’åç§»é™¤é«˜äº®æ•ˆæœ
        setTimeout(() => {
            targetElement.classList.remove('highlight');
        }, 3000);
    }
});
</script>
{% endif %}
   
    <script src="{% static 'plugin/toastr/toastr.min.js' %}" type="text/javascript"></script>

    <script type="text/javascript" src="/static/it/js/product/basic.js"></script>

    <script src="/static/it/js/product/proposal-Submit.js" type="text/javascript"></script>

    <script src="/static/it/js/baidusearch.js" type="text/javascript"></script>
    <script type="text/javascript" src="/static/it/js/askciTongJi.js"></script>


    <script src="/static/it/js/product/jquery.common.js"></script>





</body>
</html>